<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Merger & Audio Converter</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .main-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            margin: 2rem auto;
            max-width: 1200px;
        }
        .nav-tabs .nav-link {
            border: none;
            color: #6c757d;
            font-weight: 500;
            padding: 1rem 2rem;
            border-radius: 10px 10px 0 0;
        }
        .nav-tabs .nav-link.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
        }
        .upload-area {
            border: 3px dashed #dee2e6;
            border-radius: 15px;
            padding: 3rem;
            text-align: center;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }
        .upload-area:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }
        .upload-area.dragover {
            border-color: #667eea;
            background: #e8f2ff;
            transform: scale(1.02);
        }
        .form-control, .form-select {
            border-radius: 10px;
            border: 2px solid #e9ecef;
            padding: 0.75rem 1rem;
        }
        .form-control:focus, .form-select:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 10px;
            padding: 0.75rem 2rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        .progress {
            height: 10px;
            border-radius: 10px;
            background: #e9ecef;
        }
        .progress-bar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
        }
        .alert {
            border-radius: 10px;
            border: none;
        }
        .file-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 0.5rem 1rem;
            margin: 0.5rem 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .file-item:hover {
            background: #e9ecef;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .file-item.dragging {
            opacity: 0.5;
            transform: rotate(5deg);
            border-color: #667eea;
        }
        
        .file-item.drag-over {
            border-color: #28a745;
            background: #d4edda;
        }
        
        .drag-handle {
            cursor: move;
            color: #6c757d;
            margin-right: 0.5rem;
            font-size: 1.2rem;
        }
        
        .drag-handle:hover {
            color: #667eea;
        }
        
        .file-order {
            background: #667eea;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
            margin-right: 0.5rem;
        }
        
        .delete-btn {
            transition: all 0.2s ease;
            border-radius: 6px;
            padding: 0.25rem 0.5rem;
        }
        
        .delete-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 2px 4px rgba(220, 53, 69, 0.3);
        }
        .color-preview {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            border: 2px solid #dee2e6;
            cursor: pointer;
        }
        .download-section {
            background: #e8f5e8;
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            margin-top: 2rem;
        }
        .feature-card {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            margin: 1rem 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        .feature-card:hover {
            transform: translateY(-5px);
        }
        .icon-large {
            font-size: 3rem;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
    </style>
</head>
<body>
    <div class="container-fluid py-4">
        <div class="main-container p-4">
            <!-- Header -->
            <div class="text-center mb-5">
                <h1 class="display-4 fw-bold text-primary mb-3">
                    <i class="fas fa-video me-3"></i>Video Merger & Audio Converter
                </h1>
                <p class="lead text-muted">Merge videos and convert audio files to video with ease</p>
            </div>

            <!-- Navigation Tabs -->
            <ul class="nav nav-tabs" id="mainTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="merge-tab" data-bs-toggle="tab" data-bs-target="#merge" type="button" role="tab">
                        <i class="fas fa-layer-group me-2"></i>Merge Videos
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="convert-tab" data-bs-toggle="tab" data-bs-target="#convert" type="button" role="tab">
                        <i class="fas fa-music me-2"></i>Audio to Video
                    </button>
                </li>
            </ul>

            <!-- Tab Content -->
            <div class="tab-content" id="mainTabsContent">
                <!-- Video Merger Tab -->
                <div class="tab-pane fade show active" id="merge" role="tabpanel">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="feature-card">
                                <h3><i class="fas fa-upload me-2"></i>Upload Video Files</h3>
                                <div class="upload-area" id="videoUploadArea">
                                    <i class="fas fa-cloud-upload-alt fa-3x text-muted mb-3"></i>
                                    <h5>Drag & Drop Video Files Here</h5>
                                    <p class="text-muted">or click to browse</p>
                                    <input type="file" id="videoFiles" multiple accept=".mp4,.avi,.mov,.mkv,.wmv,.flv,.webm,.m4v" style="display: none;">
                                    <button class="btn btn-outline-primary" onclick="document.getElementById('videoFiles').click()">
                                        <i class="fas fa-folder-open me-2"></i>Choose Files
                                    </button>
                                </div>
                                <div id="videoFileList" class="mt-3">
                                    <div class="alert alert-info">
                                        <i class="fas fa-info-circle me-2"></i>
                                        <strong>Tip:</strong> Drag files to reorder them. Videos will be merged in the order shown below.
                                    </div>
                                </div>
                            </div>

                            <div class="feature-card">
                                <h3><i class="fas fa-cogs me-2"></i>Merge Settings</h3>
                                <div class="row">
                                    <div class="col-md-6">
                                        <label for="mergeMethod" class="form-label">Merge Method</label>
                                        <select class="form-select" id="mergeMethod">
                                            <option value="concatenate">Concatenate (Sequential)</option>
                                            <option value="overlay">Overlay (Picture-in-Picture)</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="outputName" class="form-label">Output Filename</label>
                                        <input type="text" class="form-control" id="outputName" value="merged_video.mp4">
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <button class="btn btn-primary btn-lg w-100" onclick="mergeVideos()">
                                        <i class="fas fa-play me-2"></i>Merge Videos
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="feature-card">
                                <h3><i class="fas fa-info-circle me-2"></i>How It Works</h3>
                                <div class="mb-3">
                                    <h6><i class="fas fa-list-ol me-2"></i>Concatenate Method</h6>
                                    <p class="text-muted small">Joins videos end-to-end in the order you upload them.</p>
                                </div>
                                <div class="mb-3">
                                    <h6><i class="fas fa-th-large me-2"></i>Overlay Method</h6>
                                    <p class="text-muted small">Creates picture-in-picture style with the first video as background.</p>
                                </div>
                                <div class="alert alert-info">
                                    <i class="fas fa-lightbulb me-2"></i>
                                    <strong>Tip:</strong> Supported formats: MP4, AVI, MOV, MKV, WMV, FLV, WebM, M4V<br>
                                    <small class="text-muted">Maximum file size: 1GB per file</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Audio Converter Tab -->
                <div class="tab-pane fade" id="convert" role="tabpanel">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="feature-card">
                                <h3><i class="fas fa-upload me-2"></i>Upload Audio File</h3>
                                <div class="upload-area" id="audioUploadArea">
                                    <i class="fas fa-cloud-upload-alt fa-3x text-muted mb-3"></i>
                                    <h5>Drag & Drop Audio File Here</h5>
                                    <p class="text-muted">or click to browse</p>
                                    <input type="file" id="audioFile" accept=".mov,.mp3,.wav,.aac,.m4a,.flac,.ogg,.wma" style="display: none;">
                                    <button class="btn btn-outline-primary" onclick="document.getElementById('audioFile').click()">
                                        <i class="fas fa-folder-open me-2"></i>Choose File
                                    </button>
                                </div>
                                <div id="audioFileInfo" class="mt-3"></div>
                            </div>

                            <div class="feature-card">
                                <h3><i class="fas fa-cogs me-2"></i>Conversion Settings</h3>
                                <div class="row">
                                    <div class="col-md-6">
                                        <label for="resolutionWidth" class="form-label">Width</label>
                                        <input type="number" class="form-control" id="resolutionWidth" value="1920" min="1" max="7680">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="resolutionHeight" class="form-label">Height</label>
                                        <input type="number" class="form-control" id="resolutionHeight" value="1080" min="1" max="4320">
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-md-4">
                                        <label for="fps" class="form-label">FPS</label>
                                        <input type="number" class="form-control" id="fps" value="30" min="1" max="60">
                                    </div>
                                    <div class="col-md-8">
                                        <label class="form-label">Background Color</label>
                                        <div class="d-flex align-items-center">
                                            <input type="number" class="form-control me-2" id="colorR" value="0" min="0" max="255" placeholder="R">
                                            <input type="number" class="form-control me-2" id="colorG" value="0" min="0" max="255" placeholder="G">
                                            <input type="number" class="form-control me-2" id="colorB" value="0" min="0" max="255" placeholder="B">
                                            <div class="color-preview" id="colorPreview" style="background: rgb(0,0,0)"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-md-12">
                                        <label for="audioOutputName" class="form-label">Output Filename (Optional)</label>
                                        <input type="text" class="form-control" id="audioOutputName" placeholder="Leave empty for auto-generated name">
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <button class="btn btn-primary btn-lg w-100" onclick="convertAudio()">
                                        <i class="fas fa-play me-2"></i>Convert to Video
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="feature-card">
                                <h3><i class="fas fa-info-circle me-2"></i>How It Works</h3>
                                <p class="text-muted">Convert audio-only files to video files with a customizable background color.</p>
                                <div class="alert alert-info">
                                    <i class="fas fa-lightbulb me-2"></i>
                                    <strong>Supported formats:</strong> MOV, MP3, WAV, AAC, M4A, FLAC, OGG, WMA<br>
                                    <small class="text-muted">Maximum file size: 1GB per file</small>
                                </div>
                                <div class="alert alert-warning">
                                    <i class="fas fa-exclamation-triangle me-2"></i>
                                    <strong>Note:</strong> Files are automatically cleaned up after 1 hour
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Progress Section -->
            <div id="progressSection" class="mt-4" style="display: none;">
                <div class="feature-card">
                    <h3><i class="fas fa-spinner fa-spin me-2"></i>Processing...</h3>
                    <div class="progress mb-3">
                        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%"></div>
                    </div>
                    <p id="progressText" class="text-muted">Preparing files...</p>
                </div>
            </div>

            <!-- Results Section -->
            <div id="resultsSection" class="mt-4" style="display: none;">
                <div class="download-section">
                    <i class="fas fa-check-circle fa-3x text-success mb-3"></i>
                    <h3 id="successMessage">Processing Complete!</h3>
                    <p class="text-muted" id="resultDetails">Your file is ready for download.</p>
                    <button class="btn btn-success btn-lg" onclick="downloadFile()">
                        <i class="fas fa-download me-2"></i>Download File
                    </button>
                </div>
            </div>

            <!-- Error Section -->
            <div id="errorSection" class="mt-4" style="display: none;">
                <div class="alert alert-danger">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    <strong>Error:</strong> <span id="errorMessage"></span>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html> 